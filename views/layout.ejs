<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %> | Fashion Store</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <%- defineContent('styles') %>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container header-container">
      <a href="/" class="logo">Fashion Store</a>
      
      <div class="search-container">
        <form class="search-form" onsubmit="return handleSearch(event)">
          <input type="text" id="search-input" placeholder="Search products...">
          <button type="submit">
            <i class="fas fa-search"></i>
          </button>
        </form>
        <div id="search-results" class="search-results"></div>
      </div>

      <button class="mobile-menu-btn">
        <i class="fas fa-bars"></i>
      </button>
      
      <nav>
        <ul class="nav-menu">
          <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
          <li class="nav-item"><a href="/products?category=men" class="nav-link">Men</a></li>
          <li class="nav-item"><a href="/products?category=women" class="nav-link">Women</a></li>
          <li class="nav-item"><a href="/products" class="nav-link">All Products</a></li>
          <li class="nav-item">
            <a href="/cart" class="nav-link cart-icon">
              <i class="fas fa-shopping-cart"></i>
              <span class="cart-count">0</span>
            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fas fa-user"></i>
              <% if (locals.user) { %>
                <span class="ms-1"><%= user.name %></span>
              <% } %>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
              <% if (locals.user) { %>
                <li><a class="dropdown-item" href="/profile"><i class="fas fa-user-circle me-2"></i>Profile</a></li>
                <li><a class="dropdown-item" href="/orders"><i class="fas fa-shopping-bag me-2"></i>My Orders</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="/auth/logout"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
              <% } else { %>
                <li><a class="dropdown-item" href="/auth/login"><i class="fas fa-sign-in-alt me-2"></i>Login</a></li>
                <li><a class="dropdown-item" href="/auth/register"><i class="fas fa-user-plus me-2"></i>Register</a></li>
              <% } %>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Flash Messages -->
  <% if (locals.success_msg && success_msg.length > 0) { %>
    <div class="container mt-3">
      <div class="alert alert-success alert-dismissible fade show" role="alert">
        <%= success_msg %>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    </div>
  <% } %>

  <% if (locals.error_msg && error_msg.length > 0) { %>
    <div class="container mt-3">
      <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <%= error_msg %>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    </div>
  <% } %>

  <!-- Main Content -->
  <main>
    <%- body %>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer-container">
      <div class="footer-section">
        <h3>Fashion Store</h3>
        <p>Your one-stop shop for trendy men's and women's clothing.</p>
        <div class="social-links">
          <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
          <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
          <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
          <a href="#" class="social-link"><i class="fab fa-pinterest"></i></a>
        </div>
      </div>
      
      <div class="footer-section">
        <h3>Shop</h3>
        <ul class="footer-links">
          <li><a href="/products?category=men">Men's Clothing</a></li>
          <li><a href="/products?category=women">Women's Clothing</a></li>
          <li><a href="/products">All Products</a></li>
          <li><a href="/cart">Shopping Cart</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Customer Service</h3>
        <ul class="footer-links">
          <li><a href="#">Contact Us</a></li>
          <li><a href="#">Shipping Policy</a></li>
          <li><a href="#">Returns & Exchanges</a></li>
          <li><a href="#">FAQs</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Newsletter</h3>
        <p>Subscribe to receive updates on new arrivals and special offers.</p>
        <form class="newsletter-form">
          <input type="email" placeholder="Your email address" required>
          <button type="submit" class="btn btn-primary">Subscribe</button>
        </form>
      </div>
    </div>
    
    <div class="copyright">
      <div class="container">
        <p>&copy; 2023 Fashion Store. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/main.js"></script>
  <%- defineContent('scripts') %>
</body>
</html> 